<div align="center">

`C√¥ng ty TNHH Gi·∫£i Ph√°p K·ªπ Thu·∫≠t S·ªë DH - M·∫´u: DH-02: M√¥ t·∫£ thay ƒë·ªïi h·ªá th·ªëng DHG.Hospital 3.1`

</div>

<div align="center">
  <img src="https://raw.githubusercontent.com/dh-hos/dhg.hospitalprinter/main/Deploy_Tools/Logo.ico" alt="Simple Icons" width=70>
  <h1>PHI·∫æU M√î T·∫¢ THAY ƒê·ªîI H·ªÜ TH·ªêNG</h1>  
</div>
<div align="center">

#### Ch·ªß ƒë·ªÅ: Module Reports xu·∫•t d·ªØ li·ªáu XML130 theo [Quy·∫øt ƒë·ªãnh 4750/QD-BYT](https://github.com/dh-hos/Mo-ta-he-thong/blob/main/XML130/QD4570/4750.pdf) v√† M·∫´u C79-HD ([Th√¥ng t∆∞ 102/2018/TT-BTC](https://chinhphu.vn/default.aspx?pageid=27160&docid=196269)) l·∫•y d·ªØ li·ªáu t·ª´ XML4750.
</div>

###### :eight_spoked_asterisk: Ng∆∞·ªùi l·∫≠p: [**Nguy·ªÖn Vi·∫øt Vinh**](https://github.com/vinh-dh)

###### :eight_spoked_asterisk: Ng√†y l·∫≠p: **07/08/2024**

###### :eight_spoked_asterisk: Kh√°ch h√†ng: **T·∫•t c·∫£ kh√°ch h√†ng s·ª≠ d·ª•ng DHG.Hospital**

###### :eight_spoked_asterisk: Y√™u c·∫ßu ph√°t sinh

###### :eight_spoked_asterisk: X·ª≠ l√Ω y√™u c·∫ßu

:white_check_mark: **Module Reports b·ªï sung menu v√† form xu·∫•t d·ªØ li·ªáu XML130 (Theo Quy·∫øt ƒë·ªãnh 4750). Form xu·∫•t XML130 g·ªìm 2 tab:**

:blue_book: Tab 1 xu·∫•t `XML4750`:

- B·ªï sung ƒë·∫ßy ƒë·ªß c√°c tab con t·ª´ `XML1` ƒë·∫øn `XML15`. M·ªói b·∫£ng t∆∞∆°ng ·ª©ng 1 tab: b·ªï sung ƒë·∫ßy ƒë·ªß c√°c c·ªôt theo quy ƒë·ªãnh t·ª´ Qƒê 4750.
- D·ªØ li·ªáu ƒë∆∞·ª£c load t·ª´ `SCHEMA xml130`.
- Ti√™u ch√≠ th·ªùi gian th·ªëng k√™: ƒë∆∞·ª£c ch·ªçn t·ª´ `xml130.bang1.ngay_ttoan`, `xml130.bang1.thang_qt` v√† `xml130.bang1.nam_qt`. C√°c b·∫£ng d·ªØ li·ªáu c√≤n l·∫°i ƒë∆∞·ª£c load tham chi·∫øu t·ª´ c·ªôt `ma_lk` c·ªßa b·∫£ng hi·ªán t·∫°i t∆∞∆°ng ·ª©ng v·ªõi `xml1.ma_lk` c·ªßa b·∫£ng 1. ƒêi·ªÅu ki·ªán r√†ng bu·ªôc khi load d·ªØ li·ªáu: `bang1.t_tongchi_bh > 0`[^2024-09-09-01].
- T·∫°i tab `b·∫£ng 1` (XML1): B·ªï sung c·ªôt `checkbox` cho ph√©p ng∆∞·ªùi d√πng ch·ªçn h·ªì s∆° c·∫ßn xu·∫•t d·ªØ li·ªáu ra file XML. V·ªõi c√°c h·ªì s∆° ƒë√£ ch·ªçn, b·ªï sung c√°c Button xu·∫•t: `[XML 1 b·ªánh nh√¢n 1 file]`, `[XML file t·ªïng h·ª£p]`, `[Excel CV3360 - (C·ªïng update 27/8/2019)]`.
<p align="center"><img src="https://github.com/user-attachments/assets/94722470-a31b-4e19-ad2e-c6472c8e05a0" width="70%"></p>

- D·ªØ li·ªáu xu·∫•t XML  theo chu·∫©n v√† quy ƒë·ªãnh t·∫°i C√¥ng vƒÉn [ 1245/BHXH-CNTT](https://github.com/dh-hos/Mo-ta-he-thong/blob/main/XML130/QD4570/1245-BHXH-CNTT_c%C3%A1c_t%E1%BB%89nh_N%C3%A2ng_c%E1%BA%A5p_h%E1%BB%87_th%E1%BB%91ng_theo_Quy%E1%BA%BFt_%C4%91%E1%BB%8Bnh_s%E1%BB%91_4750_Q%C4%90_BYT_fn.pdf) do BHXH Vi·ªát Nam ban h√†nh ng√†y 03/05/2024).
- D·ªØ li·ªáu xu·∫•t file Excel C√¥ng vƒÉn [3360/BHXH-CSYT](https://github.com/dh-hos/Mo-ta-he-thong/blob/main/CONGVAN-YEUCAU/CV%203360_BHXH-CSYT_ngay0492015.pdf), do BHXH Vi·ªát Nam ban h√†nh ng√†y 04 th√°ng 09 nƒÉm 2015: C·∫≠p nh·∫≠t m·∫´u Excel  t·ª´ C·ªïng gi√°m ƒë·ªãnh BHYT ng√†y 27/8/2019, c·ª• th·ªÉ:

|STT|Ch·ªâ ti√™u|Ki·ªÉu d·ªØ li·ªáu (theo Qƒê4750)|Di·ªÖn gi·∫£i (CV3360)|Ghi ch√∫|
|:-------:|-------|-------|-------|-------|
|1|stt|NUMERIC(10,0)|S·ªë th·ª© t·ª± b·ªánh nh√¢n t·ª´ 1 ƒë·∫øn h·∫øt||
|2|ma_bn|VARCHAR(100)|M√£ s·ªë BN quy ƒë·ªãnh t·∫°i CSKCB|`=bang1.ma_bn`|
|3|ho_ten|VARCHAR(255)|H·ªç t√™n ng∆∞·ªùi b·ªánh vi·∫øt b·∫±ng ch·ªØ th∆∞·ªùng.|`=bang1.ho_ten`|
|4|ngay_sinh|VARCHAR(12)|Ng√†y sinh ghi tr√™n th·∫ª g·ªìm 8 k√Ω t·ª±; 4 k√Ω t·ª± nƒÉm + 2 k√Ω t·ª± th√°ng + 2 k√Ω t·ª± ng√†y (n·∫øu kh√¥ng c√≥ ng√†y sinh th√¨ ghi nƒÉm sinh: 4 k√Ω t·ª±)|`=LEFT(bang1.ngay_sinh,8)`[^2024-09-06-01]|
|5|gioi_tinh|NUMERIC(1,0)|Gi·ªõi t√≠nh: m√£ h√≥a b·∫±ng 1 ch·ªØ s·ªë (Nam = 1 N·ªØ = 2) |`=bang1.gioi_tinh`|
|6|dia_chi|VARCHAR(1024)|ƒê·ªãa ch·ªâ tr√™n th·∫ª BHYT ƒë·ªëi v·ªõi tr·∫ª em kh√¥ng c√≥ th·∫ª ghi ƒë·∫ßy ƒë·ªß ƒë·ªãa ch·ªâ tr√™n gi·∫•y t·ªù thay th·∫ø (t·ªëi thi·ªÉu ph·∫£i c√≥ ƒë·ªãa ch·ªâ v·ªÅ x√£ huy·ªán t·ªânh c·ªßa tr·∫ª).|`=bang1.dia_chi`|
|7|ma_the|VARCHAR(50)|M√£ th·∫ª BHYT do c∆° quan BHXH c·∫•p kh√¥ng thay ƒë·ªïi kh√¥ng th√™m b·ªõt c√°c k√Ω t·ª±|`=bang1.ma_the_bhyt`|
|8|ma_dkbd|VARCHAR(50)|M√£ c∆° s·ªü KCB ban ƒë·∫ßu ghi ƒë√∫ng 5 k√Ω t·ª± tr√™n th·∫ª BHYT|`=bang1.ma_dkbd`|
|9|gt_the_tu|VARCHAR(50)|Th·ªùi ƒëi·ªÉm th·∫ª c√≥ gi√° tr·ªã g·ªìm 8 k√Ω t·ª±; 4 k√Ω t·ª± nƒÉm + 2 k√Ω t·ª± th√°ng + 2 k√Ω t·ª± ng√†y. V√≠ d·ª•: ng√†y 30/04/2015 ƒë∆∞·ª£c hi·ªÉn th·ªã l√† 20150430|`=bang1.gt_the_tu`|
|10|gt_the_den|VARCHAR(50)|Th·ªùi ƒëi·ªÉm th·∫ª h·∫øt gi√° tr·ªã g·ªìm 8 k√Ω t·ª±; 4 k√Ω t·ª± nƒÉm + 2 k√Ω t·ª± th√°ng + 2 k√Ω t·ª± ng√†y. V√≠ d·ª•: ng√†y 31/05/2015 ƒë∆∞·ª£c hi·ªÉn th·ªã l√† 20150531|`=bang1.gt_the_den`|
|11|ma_benh|VARCHAR(7)|M√£ b·ªánh ch√≠nh ƒë∆∞·ª£c m√£ h√≥a theo ICD X|`=bang1.ma_benh_chinh`|
|12|ma_benhkhac|VARCHAR(100)|M√£ b·ªánh kh√°c m√£ h√≥a theo ICD X n·∫øu c√≥ nhi·ªÅu m√£ ICD th√¨ m·ªói m√£ ƒëu·ª£c ph√¢n c√°ch b·∫±ng k√Ω t·ª± ‚Äú;‚Äù|`=bang1.ma_benh_kt`|
|13|ma_lydo_vvien|VARCHAR(4)|M√£ h√≥a l√Ω do ƒë·∫øn kh√°m b·ªánh: 1 = ƒë√∫ng tuy·∫øn; 2 = c·∫•p c·ª©u; 3 = tr√°i tuy·∫øn|`=bang1.ma_doituong_kcb`|
|14|ma_noi_chuyen|VARCHAR(5)|M√£ c∆° s·ªü KCB chuy·ªÉn ng∆∞·ªùi b·ªánh ƒë·∫øn (M√£ do c∆° quan BHXH c·∫•p)|`=bang1.ma_noi_di`|
|15|ngay_vao|VARCHAR(12)|Th·ªùi gian ƒë·∫øn kh√°m ho·∫∑c nh·∫≠p vi·ªán theo ng√†y gi·ªù; g·ªìm 12 k√Ω t·ª±; 4 k√Ω t·ª± nƒÉm + 2 k√Ω t·ª± th√°ng + 2 k√Ω t·ª± ng√†y + 2 k√Ω t·ª± gi·ªù (24 gi·ªù) + 2 k√Ω t·ª± ph√∫t. V√≠ d·ª•: ng√†y 30/06/2015 08:20 ƒë∆∞·ª£c hi·ªÉn th·ªã l√† 201506300820|`=bang1.ngay_vao`|
|16|ngay_ra|VARCHAR(12)|Ng√†y gi·ªù ra vi·ªán; g·ªìm 12 k√Ω t·ª±; 4 k√Ω t·ª± nƒÉm + 2 k√Ω t·ª± th√°ng + 2 k√Ω t·ª± ng√†y + 2 k√Ω t·ª± gi·ªù (24 gi·ªù) + 2 k√Ω t·ª± ph√∫t. V√≠ d·ª•: ng√†y 31/07/2015 16:20 ƒë∆∞·ª£c hi·ªÉn th·ªã l√† 201507311620|`=bang1.ngay_ra`|
|17|so_ngay_dtri|NUMERIC(3,0)|S·ªë ng√†y ƒëi·ªÅu tr·ªã trong ƒë·ª£t KCB ngo·∫°i tr√∫ ho·∫∑c n·∫±m vi·ªán n·ªôi tr√∫ (= ng√†y ra - ng√†y v√†o). Tr∆∞·ªùng h·ª£p ƒëi·ªÅu tr·ªã n·ªôi tr√∫ nh∆∞ng c√≥ m·ªôt s·ªë ng√†y kh√¥ng n·∫±m vi·ªán th√¨ t√≠nh theo ng√†y n·∫±m vi·ªán th·ª±c t·∫ø|`=bang1.so_ngay_dtri`|
|18|ket_qua_dtri|NUMERIC(1,0)|K·∫øt qu·∫£ ƒëi·ªÅu tr·ªã: M√£ h√≥a (1: Kh·ªèi; 2: ƒê·ª°; 3: Kh√¥ng thay ƒë·ªïi; 4: N·∫∑ng h∆°n; 5: T·ª≠ vong)|`=bang1.ket_qua_dtri`|
|19|tinh_trang_rv|NUMERIC(1,0)|T√¨nh tr·∫°ng ra vi·ªán: M√£ h√≥a (1: Ra vi·ªán; 2: Chuy·ªÉn vi·ªán; 3: Tr·ªën vi·ªán; 4: Xin ra vi·ªán)|`=bang1.ma_loai_rv`[^2024-08-30]|
|20|t_tongchi|NUMERIC(15,2)|T·ªïng chi ph√≠ KCB BHYT trong l·∫ßn/ƒë·ª£t ƒëi·ªÅu tr·ªã|`=bang1.t_tongchi_bh`|
|21|t_xn|NUMERIC(15,2)|Ti·ªÅn x√©t nghi·ªám|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom = 1`|
|22|t_cdha|NUMERIC(15,2)|Ti·ªÅn ch·∫©n ƒëo√°n h√¨nh ·∫£nh v√† thƒÉm d√≤ ch·ª©c nƒÉng|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom = 2`|
|23|t_thuoc|NUMERIC(15,2)|Ti·ªÅn thu·ªëc v√† d·ªãch truy·ªÅn|`=SUM(bang2.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang2.ma_nhom = 4`|
|24|t_mau|NUMERIC(15,2)|Ti·ªÅn m√°u v√† ch·∫ø ph·∫©m c·ªßa m√°u|`=SUM(bang2.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang2.ma_nhom = 7`|
|25|t_pttt|NUMERIC(15,2)|Ti·ªÅn ph·∫´u thu·∫≠t v√† th·ªß thu·∫≠t|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom IN (8,18)`|
|26|t_vtyt|NUMERIC(15,2)|Ti·ªÅn v·∫≠t t∆∞ y t·∫ø|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom = 10`|
|27|t_dvkt_tyle|NUMERIC(15,2)|Ti·ªÅn d·ªãch v·ª• k·ªπ thu·∫≠t thanh to√°n theo t·ª∑ l·ªá||
|28|t_thuoc_tyle|NUMERIC(15,2)|Ti·ªÅn thu·ªëc thanh to√°n theo t·ª∑ l·ªá||
|29|t_vtyt_tyle|NUMERIC(15,2)|Ti·ªÅn v·∫≠t t∆∞ y t·∫ø thanh to√°n theo t·ª∑ l·ªá||
|30|t_kham|NUMERIC(15,2)|Ti·ªÅn c√¥ng kh√°m b·ªánh ngo·∫°i tr√∫ ho·∫∑c ti·ªÅn gi∆∞·ªùng n·ªôi tr√∫|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom = 13`|
|31|t_vchuyen|NUMERIC(15,2)|Ti·ªÅn v·∫≠n chuy·ªÉn|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom = 12`|
|32|t_bntt|NUMERIC(15,2)|S·ªë ti·ªÅn ng∆∞·ªùi b·ªánh thanh to√°n (Ghi s·ªë ti·ªÅn ng∆∞·ªùi b·ªánh chi tr·∫£ bao g·ªìm c√πng chi tr·∫£ t·ª± tr·∫£ khi kh√°m b·ªánh ch·ªØa b·ªánh kh√¥ng ƒë√∫ng tuy·∫øn s·ªë ti·ªÅn t·ª± tr·∫£ ƒë·ªëi v·ªõi c√°c d·ªãch v·ª• y t·∫ø √°p d·ª•ng t·ª∑ l·ªá thanh to√°n)|`=bang1.t_bntt + bang1.t_bncct`|
|33|t_bhtt|NUMERIC(15,2)|Ti·ªÅn ƒë·ªÅ ngh·ªã c∆° quan BHXH thanh to√°n (g·ªìm c·∫£ chi ph√≠ ngo√†i ƒë·ªãnh su·∫•t).|`=bang1.t_bhtt`|
|34|t_ngoaids|NUMERIC(15,2)|Ti·ªÅn thanh to√°n ngo√†i ƒë·ªãnh su·∫•t (kh√¥ng bao g·ªìm ti·ªÅn BN c√πng chi tr·∫£)|`=bang1.t_bhtt_gdv`|
|35|ma_khoa|VARCHAR(50)|Ghi m√£ khoa theo quy ƒë·ªãnh t·∫°i b·∫£ng 7 Quy·∫øt ƒë·ªãnh s·ªë 2348/BYT-BH ng√†y 10/4/2015 c·ªßa B·ªô Y t·∫ø.|`=bang1.ma_khoa`|
|36|nam_qt|NUMERIC(4,0)|NƒÉm ƒë·ªÅ ngh·ªã BHXH thanh to√°n|`=bang1.nam_qt`|
|37|thang_qt|NUMERIC(2,0)|Th√°ng ƒë·ªÅ ngh·ªã BHXH thanh to√°n|`=bang1.thang_qt`|
|38|ma_khuvuc|VARCHAR(2)|Ghi m√£ n∆°i sinh s·ªëng tr√™n th·∫ª BHYT ‚ÄúK1/K2/K3‚Äù (n·∫øu c√≥)|`=bang1.ma_khuvuc`|
|39|ma_loaikcb|VARCHAR(2)|M√£ h√≥a h√¨nh th·ª©c KCB: (1: kh√°m b·ªánh; 2: ƒëi·ªÅu tr·ªã ngo·∫°i tr√∫; 3: ƒëi·ªÅu tr·ªã n·ªôi tr√∫)|`=bang1.ma_loai_kcb`|
|40|ma_cskcb|VARCHAR(5)|M√£ c∆° s·ªü KCB n∆°i ƒëi·ªÅu tr·ªã: Ghi ƒë√∫ng 5 k√Ω t·ª± m√£ c∆° s·ªü KCB do BHXH VN cung c·∫•p|`=bang1.ma_cskcb`|
|41|t_nguonkhac[^2024-08-11]|NUMERIC(15,2)|Ghi t·ªïng s·ªë ti·ªÅn c√°c ngu·ªìn kh√°c chi tr·∫£ ngo√†i ph·∫°m vi chi tr·∫£ c·ªßa qu·ªπ BHYT|`=bang1.t_nguonkhac`|


:blue_book: Tab 2 xu·∫•t d·ªØ li·ªáu m·∫´u `C79-HD`:

<p align="center"><img src="https://github.com/user-attachments/assets/745791e6-f1dc-4105-ba70-34838c0a1bff" width="70%"></p>

- D·ªØ li·ªáu t·ª´ `XML4750`, xu·∫•t l√™n form ƒë·∫ßy ƒë·ªß theo m·∫´u `C79-HD: T·ªîNG H·ª¢P CHI PH√ç KH√ÅM B·ªÜNH, CH·ªÆA B·ªÜNH C·ª¶A NG∆Ø·ªúI THAM GIA B·∫¢O HI·ªÇM Y T·∫æ`.
<p align="center"><img src="https://github.com/user-attachments/assets/4749b265-b83f-4d4f-ba87-854876afc20e" width="70%"><img src="https://github.com/user-attachments/assets/e3a8752e-6ab7-401f-ab33-2bcac1c225a6" width="70%"></p>

- C·∫•u tr√∫c d·ªØ li·ªáu m·∫´u `C79-HD`:[^2024-08-16-01]

|STT|TT C·ªôt|T√™n c·ªôt|Ghi ch√∫|
|:-------:|:-------:|-------|-------|
|1|A|STT|Th·ª© t·ª± tƒÉng d·∫ßn|
|2|B|H·ªç v√† t√™n|`=bang1.ho_ten`|
|3|C|NƒÉm sinh|`=LEFT(bang1.ngay_sinh,4)`|
|4|D|Gi·ªõi t√≠nh|X√©t: `bang1.gioi_tinh`:<br/>- 1: Nam<br/>- 2: N·ªØ<br/>- 3: Ch∆∞a x√°c ƒë·ªãnh|
|5|E|M√£ th·∫ª BHYT|`=bang1.ma_the_bhyt`|
|6|G|M√£ b·ªánh|`=bang1.ma_benh_chinh`|
|7|H|Ng√†y v√†o|`=bang1.ngay_vao`|
|8|I|Ng√†y ra|`=bang1.ngay_ra`|
|9|K|S·ªë ng√†y ƒëi·ªÅu tr·ªã th·ª±c t·∫ø|`=bang1.so_ngay_dtri`|
|10|1|T·ªïng s·ªë ti·ªÅn chi KCB BHYT thu·ªôc ph·∫°m vi h∆∞·ªüng BHYT|`=bang1.t_tongchi_bh`|
|11|2|Ti·ªÅn kh√°m b·ªánh|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom = 13`|
|12|3|Ti·ªÅn gi∆∞·ªùng|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom IN (14,15,16)`|
|13|4|Ti·ªÅn x√©t nghi·ªám|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom = 1`|
|14|5|Ti·ªÅn Ch·∫©n ƒëo√°n h√¨nh ·∫£nh/ThƒÉm d√≤ ch·ª©c nƒÉng|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom IN (2,3)`|
|15|6|Ti·ªÅn Th·ªß thu·∫≠t/ph·∫´u thu·∫≠t|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom IN (8,18)`|
|16|7|Ti·ªÅn m√°u|`=SUM(bang2.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang2.ma_nhom = 7`|
|17|8|Ti·ªÅn thu·ªëc|`=SUM(bang2.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang2.ma_nhom = 4`|
|18|9|Ti·ªÅn V·∫≠t t∆∞ y t·∫ø|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom = 10`|
|19|10|Ti·ªÅn v·∫≠n chuy·ªÉn|`=SUM(bang3.thanh_tien_bh)` ƒë·ªëi v·ªõi `bang3.ma_nhom = 12`|
|20|11|T·ªïng s·ªë ti·ªÅn ƒë·ªÅ ngh·ªã thanh to√°n t·ª´ qu·ªπ BHYT chuy·ªÉn cho BHXH t·ªânh ƒë·ªÉ thanh to√°n c∆° s·ªü KCB ƒë∆∞·ª£c thanh to√°n|`= [1] + [2] + [3]`<br/><br/>Trong ƒë√≥:<br/>1Ô∏è‚É£ ƒê·ªëi v·ªõi thu·ªëc/m√°u:<br/>N·∫øu `dmthuoc.loainguonbhyt = 1` v√† `bang2.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[1] = 0`, ng∆∞·ª£c l·∫°i `[1] = SUM(bang2.t_bhtt)`<br/><br/>2Ô∏è‚É£ ƒê·ªëi v·ªõi VTYT (`bang3.ma_nhom = 10`):<br/>N·∫øu `dmthuoc.loainguonbhyt = 1` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[2] = 0`, ng∆∞·ª£c l·∫°i `[2] = SUM(bang3.t_bhtt)`.<br/><br/>3Ô∏è‚É£ ƒê·ªëi v·ªõi c·∫≠n l√¢m s√†ng (`bang3.ma_nhom <> 10`):<br/>N·∫øu `dmcls.loainguonbhyt = 1` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[3] = 0`, ng∆∞·ª£c l·∫°i `[3] = SUM(bang3.t_bhtt)`.|
|21|12|T·ªïng s·ªë ti·ªÅn ƒë·ªÅ ngh·ªã thanh to√°n t·ª´ qu·ªπ BHYT, ƒë∆∞·ª£c thanh to√°n t·ª´ ngu·ªìn t·∫≠p trung c·ªßa BHXH Vi·ªát Nam. T·ª´ nƒÉm 2019 ƒë√≥ l√† chi ph√≠ thu·ªëc kh√°ng HIV thanh to√°n t·ª´ qu·ªπ BHYT|`= [1] + [2] + [3]`<br/><br/>Trong ƒë√≥:<br/>1Ô∏è‚É£ ƒê·ªëi v·ªõi thu·ªëc/m√°u:<br/>N·∫øu `dmthuoc.loainguonbhyt = 1` v√† `bang2.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[1] = SUM(bang2.t_bhtt)`, ng∆∞·ª£c l·∫°i `[1] = 0`.<br/><br/>2Ô∏è‚É£ ƒê·ªëi v·ªõi VTYT (`bang3.ma_nhom = 10`):<br/>N·∫øu `dmthuoc.loainguonbhyt = 1` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[2] = SUM(bang3.t_bhtt)` ng∆∞·ª£c l·∫°i `[2] = 0`.<br/><br/>3Ô∏è‚É£ ƒê·ªëi v·ªõi c·∫≠n l√¢m s√†ng (`bang3.ma_nhom <> 10`):<br/>N·∫øu `dmcls.loainguonbhyt = 1` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[3] = SUM(bang3.t_bhtt)` ng∆∞·ª£c l·∫°i `[3] = 0`.|
|22|13|Ti·ªÅn chi thu·ªëc, h√≥a ch·∫•t, v·∫≠t t∆∞ y t·∫ø ƒë∆∞·ª£c c·∫•p ph√©p l∆∞u h√†nh t·∫°i Vi·ªát Nam v√† c√°c d·ªãch v·ª• k·ªπ thu·∫≠t y t·∫ø ƒë∆∞·ª£c c·∫•p c√≥ th·∫©m quy·ªÅn ph√™ duy·ªát trong quy·ªÅn l·ª£i ƒë∆∞·ª£c h∆∞·ªüng theo quy ƒë·ªãnh t·∫°i Kho·∫£n 2, ƒêi·ªÅu 10 Ngh·ªã ƒë·ªãnh s·ªë 70/2015/Nƒê-CP c·ªßa ƒë·ªëi t∆∞·ª£ng qu√¢n nh√¢n, c√¥ng an, c∆° y·∫øu||
|23|14|S·ªë ti·ªÅn ng∆∞·ªùi b·ªánh c√πng chi tr·∫£|`=bang1.t_bncct`|
|24|15|S·ªë ti·ªÅn trong ph·∫°m vi BHYT do ng∆∞·ªùi b·ªánh t·ª± tr·∫£|`=bang1.t_bntt`|
|25|16|S·ªë ti·ªÅn t·ª´ ngu·ªìn kh√°c c·ªßa chi ph√≠ thanh to√°n t·ª´ ngu·ªìn t·∫≠p trung nh∆∞ thu·ªëc kh√°ng HIV.|`= [1] + [2] + [3]`<br/><br/>Trong ƒë√≥:<br/>1Ô∏è‚É£ ƒê·ªëi v·ªõi thu·ªëc/m√°u:<br/>‚áí N·∫øu `dmthuoc.loainguonkhac = 0` v√† `bang2.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]` v√† `bang2.tyle_tt_bh = 0` th√¨ `[1] = SUM(bang2.t_bntt)`.<br/>‚áí N·∫øu `dmthuoc.loainguonkhac = 0` v√† `bang2.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]` v√† `bang2.tyle_tt_bh <> 0` th√¨ `[1] = SUM(bang2.t_bncct)`.<br/>‚áí N·∫øu `dmthuoc.loainguonkhac = 1` v√† `bang2.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]` th√¨ `[1] = 0`.<br/><br/>2Ô∏è‚É£ ƒê·ªëi v·ªõi VTYT (`bang3.ma_nhom = 10`):<br/>‚áí N·∫øu `dmthuoc.loainguonkhac = 0` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[2] = SUM(bang3.t_bncct)`.<br/>‚áí N·∫øu `dmthuoc.loainguonkhac = 1` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[2] = 0`.<br/><br/>3Ô∏è‚É£ ƒê·ªëi v·ªõi c·∫≠n l√¢m s√†ng (`bang3.ma_nhom <> 10`):<br/>‚áí N·∫øu `dmcls.loainguonkhac = 0` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[3] = SUM(bang3.t_bncct)`<br/>‚áí N·∫øu `dmcls.loainguonkhac = 1` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[3] = 0`.|
|26|17|S·ªë ti·ªÅn t·ª´ ngu·ªìn ngo√†i kh√°c thanh to√°n, nh∆∞ chi ph√≠ ƒë∆∞·ª£c thanh to√°n t·ª´ c√°c ngu·ªìn t√†i tr·ª£ kh√°c (nh∆∞ thu·ªëc Glivec).|`= [1] + [2] + [3]`<br/><br/>Trong ƒë√≥:<br/>1Ô∏è‚É£ ƒê·ªëi v·ªõi thu·ªëc/m√°u:<br/>‚áí N·∫øu `dmthuoc.loainguonkhac = 1` v√† `bang2.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]` v√† `bang2.tyle_tt_bh = 0` th√¨ `[1] = SUM(bang2.t_bntt)`.<br/>‚áí N·∫øu `dmthuoc.loainguonkhac = 1` v√† `bang2.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]` v√† `bang2.tyle_tt_bh <> 0` th√¨ `[1] = SUM(bang2.t_bncct)`.<br/>‚áí N·∫øu `dmthuoc.loainguonkhac = 0` v√† `bang2.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]` th√¨ `[1] = 0`.<br/><br/>2Ô∏è‚É£ ƒê·ªëi v·ªõi VTYT (`bang3.ma_nhom = 10`):<br/>‚áí N·∫øu `dmthuoc.loainguonkhac = 1` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[2] = SUM(bang3.t_bncct)`.<br/>‚áí N·∫øu `dmthuoc.loainguonkhac = 0` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[2] = 0`.<br/><br/>3Ô∏è‚É£ ƒê·ªëi v·ªõi c·∫≠n l√¢m s√†ng (`bang3.ma_nhom <> 10`):<br/>‚áí N·∫øu `dmcls.loainguonkhac = 1` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[3] = SUM(bang3.t_bncct)`<br/>‚áí N·∫øu `dmcls.loainguonkhac = 0` v√† `bang3.sdnguonkhac = 1` v√† `[psdangky.sdnguonkhac = 1 ho·∫∑c bnnoitru.sdnguonkhac = 1]`th√¨ `[3] = 0`.|
|27|18|S·ªë ti·ªÅn ng∆∞·ªùi b·ªánh t·ª± chi tr·∫£ ngo√†i ph·∫°m vi ƒë∆∞·ª£c BHYT||

[^2024-09-09-01]: Thay ƒë·ªïi ng√†y 09/09/2024: B·ªï sung ƒëi·ªÅu ki·ªán r√†ng bu·ªôc khi load d·ªØ li·ªáu: `bang1.t_tongchi_bh > 0`. Chi ti·∫øt y√™u c·∫ßu t·∫°i: [üíº Reports - Th√™m ƒëi·ªÅu ki·ªán ƒë·ªÉ lo·∫°i b·ªè c√°c h·ªì s∆° kh√¥ng c√≥ chi ph√≠ ‚è≥D·ª± ki·∫øn : 2024-09-13 #123](https://github.com/dh-hos/THEO-DOI-THUC-HIEN/issues/123)
[^2024-09-06-01]: Thay ƒë·ªïi ng√†y 06/09/2024: ƒêi·ªÅu ch·ªânh ƒëi·ªÅu ki·ªán c·ªôt `ngay_sinh` khi xu·∫•t d·ªØ li·ªáu `Excel 3360`, ch·ªâ l·∫•y 8 k√Ω t·ª± b√™n tr√°i c·ªôt `bang1.ngay_sinh`. Chi ti·∫øt y√™u c·∫ßu t·∫°i: [L·ªói - Report xu·∫•t Excel theo 3360 theo Quy·∫øt ƒë·ªãnh 4750 g·ª≠i c·ªïng BH b√°o l·ªói #126](https://github.com/dh-hos/dhg.hospitalreports/issues/126)
[^2024-08-30]: Thay ƒë·ªïi ng√†y 30/08/2024: ƒêi·ªÅu ch·ªânh ƒëi·ªÅu ki·ªán c·ªôt `tinh_trang_rv` ƒë∆∞·ª£c l·∫•y d·ªØ li·ªáu t·ª´ `bang1.ma_loai_rv`.
[^2024-08-16-01]: Thay ƒë·ªïi ng√†y 16/08/2024: Thay ƒë·ªïi c√°ch t√≠nh c·ªôt `[11], [12], [16], [17]` t·ª´ `pshdxn.sdnguonkhac` th√†nh `bang2.sdnguonkhac` *(ƒë·ªëi v·ªõi thu·ªëc/m√°u)* v√† `bang3.sdnguonkhac` *(ƒë·ªëi v·ªõi VTYT)*, t·ª´ `chidinhcls.sdnguonkhac` th√†nh `bang3.sdnguonkhac`.
[^2024-08-11]: Thay ƒë·ªïi ng√†y 11/08/2024: Thay ƒë·ªïi s·ªë c·ªôt xu·∫•t Excel 3360 (C·ªïng update 27/8/2019) ch·ªâ c√≥ 41 c·ªôt.
